\section{Application Program Interface (API)}

\subsection{System}

\subsubsection{System task interface}

Topic:
\begin{lstlisting}<IMEI>/system/task\end{lstlisting}
Type:
\begin{lstlisting}consumer\end{lstlisting}
    
\subsubsection{System configuration interface}

Topic:
\begin{lstlisting}<IMEI>/system/config\end{lstlisting}
Type:
\begin{lstlisting}consumer\end{lstlisting}
    
\subsubsection{Connection Status}

Topic:
\begin{lstlisting}<IMEI>/system/status\end{lstlisting}
Type:
\begin{lstlisting}producer\end{lstlisting}
    
This topic indicates whether or not the endnode is currently connected to the broker


\subsection{Device - SSM}

\subsubsection{SSM Inbox}

An XML interface to the spectrum scanner
    
Topic:
\begin{lstlisting}<IMEI>/ssm/task\end{lstlisting}
Type:
\begin{lstlisting}consumer\end{lstlisting}

\subsubsection{SSM Spectrum Scans}

Topic:
\begin{lstlisting}<IMEI>/ssm/scans\end{lstlisting}
Type:
\begin{lstlisting}producer\end{lstlisting}
    
This topic outputs raw scan files

Parameters:
\begin{lstlisting}
Start   Start of the frequency range in megahertz)
End     End of the frequency range in megahertz)
Gain    Scan gain in Decibels (optional, default – 0dB)
Dwell   Dwell time in seconds (optional, default – 131ms)
FFT     The number of FFT bins (optional, default – 1024)
LO      The local oscillator offset in megahertz (optional, default – 0MHz)
\end{lstlisting}


\subsection{Device - GPS}
\subsubsection{GPS Inbox}

Topic:
\begin{lstlisting}<IMEI>/gps/workflow\end{lstlisting}
Type:
\begin{lstlisting}consumer\end{lstlisting}


\begin{lstlisting}
task_id                 ="power scan"
lower_freq              Start of the frequency range in hertz
upper_freq              End of the frequency range in hertz
bin_size                Number of FFT bins
gain                    Gain
exit_timer              ="2s"
integration_interval    ="2s"
band_offset             Band offset, the amount of non-linear band to trim off (typically 20%)
\end{lstlisting}

Output:
date, time, Hz low, Hz high, Hz step, samples, dB, dB, dB, ...

\begin{lstlisting}
<scan task_id="power scan" date="2015-06-08" time="12:00:31" hz_low="580003907"  hz_high="581996093"  hz_step="9765.62" samples="224">-40.70, -41.79, -41.39, -40.56, -41.07, -41.26, -42.19, -42.18, -40.60, -41.21, -40.96, -41.99, -41.37, -41.94, -41.50, -40.38, -41.85, -40.40, -41.45, -41.90, -40.91, -40.74, -41.51, -40.98, -42.20, -41.99, -41.06, -41.72, -41.22, -41.89, -41.63, -41.87, -41.18, -41.24, -41.70, -41.62, -41.91, -42.22, -42.49, -41.70, -41.68, -41.85, -42.21, -41.80, -42.48, -42.15, -41.56, -42.15, -42.44, -42.02, -42.58, -42.44, -41.83, -41.58, -42.01, -42.35, -42.44, -41.94, -42.58, -42.35, -42.15, -42.44, -42.54, -42.55, -42.28, -42.61, -42.59, -42.08, -42.40, -42.69, -42.43, -42.31, -41.97, -41.95, -42.09, -42.69, -42.17, -42.69, -42.37, -42.19, -42.50, -42.48, -42.39, -42.34, -42.43, -42.52, -42.23, -42.18, -42.05, -42.62, -42.41, -41.87, -42.53, -42.35, -42.58, -42.01, -42.12, -42.09, -40.89, -41.16, -39.85, -40.22, -37.05, -39.15, -39.15, -40.30, -41.48, -39.99, -37.92, -37.85, -40.20, -41.50, -40.69, -38.79, -38.67, -38.58, -40.91, -39.90, -41.35, -40.21, -38.63, -40.74, -40.76, -41.48, -40.88, -40.75, -39.20, -40.83, -40.30, -41.28, -41.56, -39.71, -41.05, -40.70, -41.41, -40.88, -42.21, -40.80, -41.02, -41.15, -40.92, -41.45, -41.74, -41.40, -40.82, -41.46, -40.26, -42.21, -42.68, -41.07, -42.03, -41.21, -41.78, -41.90, -42.32, -41.74, -42.09, -41.58, -41.23, -42.76, -42.25, -42.63, -42.40, -42.32, -41.87, -42.85, -42.68, -42.27, -42.12, -41.85, -42.51, -42.34, -42.75, -42.73, -42.07, -42.07, -42.11, -42.22, -42.18, -42.42, -42.23, -42.67, -42.28, -42.49, -42.35, -42.45, -42.58, -42.11, -42.19, -42.65, -42.39, -42.89, -42.35, -42.66, -42.80, -42.71, -42.44, -43.45, -42.84, -43.52, -43.59, -42.90, -42.94, -43.12, -43.88, -43.60, -43.60</scan>

2015-06-08, 12:00:31, 580003907, 581996093, 9765.62, 224, -40.70, -41.79, -41.39, -40.56, -41.07, -41.26, -42.19, -42.18, -40.60, -41.21, -40.96, -41.99, -41.37, -41.94, -41.50, -40.38, -41.85, -40.40, -41.45, -41.90, -40.91, -40.74, -41.51, -40.98, -42.20, -41.99, -41.06, -41.72, -41.22, -41.89, -41.63, -41.87, -41.18, -41.24, -41.70, -41.62, -41.91, -42.22, -42.49, -41.70, -41.68, -41.85, -42.21, -41.80, -42.48, -42.15, -41.56, -42.15, -42.44, -42.02, -42.58, -42.44, -41.83, -41.58, -42.01, -42.35, -42.44, -41.94, -42.58, -42.35, -42.15, -42.44, -42.54, -42.55, -42.28, -42.61, -42.59, -42.08, -42.40, -42.69, -42.43, -42.31, -41.97, -41.95, -42.09, -42.69, -42.17, -42.69, -42.37, -42.19, -42.50, -42.48, -42.39, -42.34, -42.43, -42.52, -42.23, -42.18, -42.05, -42.62, -42.41, -41.87, -42.53, -42.35, -42.58, -42.01, -42.12, -42.09, -40.89, -41.16, -39.85, -40.22, -37.05, -39.15, -39.15, -40.30, -41.48, -39.99, -37.92, -37.85, -40.20, -41.50, -40.69, -38.79, -38.67, -38.58, -40.91, -39.90, -41.35, -40.21, -38.63, -40.74, -40.76, -41.48, -40.88, -40.75, -39.20, -40.83, -40.30, -41.28, -41.56, -39.71, -41.05, -40.70, -41.41, -40.88, -42.21, -40.80, -41.02, -41.15, -40.92, -41.45, -41.74, -41.40, -40.82, -41.46, -40.26, -42.21, -42.68, -41.07, -42.03, -41.21, -41.78, -41.90, -42.32, -41.74, -42.09, -41.58, -41.23, -42.76, -42.25, -42.63, -42.40, -42.32, -41.87, -42.85, -42.68, -42.27, -42.12, -41.85, -42.51, -42.34, -42.75, -42.73, -42.07, -42.07, -42.11, -42.22, -42.18, -42.42, -42.23, -42.67, -42.28, -42.49, -42.35, -42.45, -42.58, -42.11, -42.19, -42.65, -42.39, -42.89, -42.35, -42.66, -42.80, -42.71, -42.44, -43.45, -42.84, -43.52, -43.59, -42.90, -42.94, -43.12, -43.88, -43.60, -43.60
2015-06-08, 12:00:31, 582003907, 583996093, 9765.62, 224, -33.72, -35.05, -35.47, -37.11, -35.79, -33.78, -34.79, -35.18, -34.81, -36.03, -35.38, -34.68, -34.76, -33.02, -34.49, -33.28, -27.30, -27.25, -24.35, -24.38, -18.72, -21.32, -21.23, -23.86, -26.68, -23.23, -19.28, -19.39, -24.75, -26.12, -23.22, -20.72, -19.55, -19.87, -24.52, -23.48, -28.02, -23.05, -18.50, -23.15, -23.06, -23.26, -25.24, -22.15, -20.00, -22.12, -21.62, -25.80, -27.82, -19.92, -22.10, -20.64, -22.83, -22.21, -23.99, -23.09, -20.07, -22.39, -21.02, -24.73, -24.30, -21.25, -20.58, -22.12, -19.15, -25.56, -26.74, -20.30, -23.49, -19.68, -22.19, -22.02, -23.79, -23.90, -20.05, -19.10, -18.78, -24.48, -24.33, -21.92, -19.94, -19.36, -18.85, -24.50, -24.06, -21.80, -20.85, -16.65, -21.50, -22.43, -22.66, -23.09, -19.25, -17.69, -19.57, -21.80, -25.26, -24.44, -18.35, -19.93, -19.14, -25.00, -24.52, -20.75, -20.75, -16.00, -20.69, -22.98, -23.24, -22.77, -19.20, -17.93, -21.06, -20.44, -24.92, -23.86, -16.96, -19.44, -19.28, -23.04, -22.66, -21.83, -20.65, -17.63, -20.51, -20.68, -24.10, -21.96, -18.62, -20.01, -20.92, -20.13, -25.00, -23.92, -20.07, -21.63, -18.27, -22.57, -24.28, -20.40, -22.18, -20.34, -18.99, -19.59, -25.14, -22.04, -19.74, -18.76, -18.79, -20.12, -23.69, -22.86, -21.40, -20.46, -17.46, -22.29, -23.97, -20.54, -21.63, -18.66, -17.97, -20.58, -21.99, -24.10, -23.54, -17.99, -18.74, -20.62, -22.95, -21.68, -20.99, -19.50, -17.55, -22.69, -20.94, -23.15, -22.41, -16.85, -19.34, -21.57, -19.88, -24.59, -22.67, -18.38, -20.99, -19.25, -21.51, -22.95, -20.04, -19.84, -19.88, -20.45, -20.22, -26.76, -22.53, -20.01, -21.49, -20.02, -20.82, -24.72, -21.59, -21.38, -22.27, -18.03, -23.67, -27.14, -27.14
2015-06-08, 12:00:31, 584003907, 585996093, 9765.62, 224, -25.67, -22.36, -22.12, -18.95, -19.43, -19.17, -24.22, -23.26, -21.18, -19.76, -17.34, -20.98, -23.71, -20.69, -21.58, -18.60, -15.78, -20.02, -21.79, -22.44, -21.92, -16.28, -17.66, -19.66, -20.57, -21.73, -20.57, -16.81, -16.19, -20.97, -21.74, -21.86, -19.69, -16.78, -17.35, -21.09, -18.41, -23.94, -20.60, -15.65, -19.65, -19.64, -19.75, -23.07, -18.73, -17.66, -18.62, -18.28, -19.70, -24.18, -18.34, -17.48, -19.59, -19.45, -17.75, -22.83, -19.81, -17.77, -20.39, -16.57, -20.52, -23.49, -18.20, -21.96, -19.73, -16.46, -19.23, -23.00, -19.81, -21.33, -17.63, -17.24, -20.62, -20.87, -20.31, -22.27, -17.59, -15.37, -22.25, -21.98, -19.74, -20.58, -16.70, -17.08, -21.87, -18.57, -21.84, -20.95, -14.93, -18.34, -21.43, -18.92, -21.24, -18.23, -16.95, -19.31, -19.25, -18.13, -23.76, -17.98, -16.08, -21.48, -19.27, -21.81, -21.81, -18.43, -17.92, -21.37, -16.63, -19.32, -22.68, -16.62, -21.09, -20.35, -16.16, -18.29, -21.89, -19.14, -20.47, -17.17, -16.32, -20.68, -20.51, -19.33, -23.34, -17.93, -14.82, -22.90, -22.36, -19.81, -21.04, -15.43, -17.86, -21.93, -19.74, -23.54, -20.82, -15.61, -17.34, -23.78, -20.89, -21.53, -17.70, -16.42, -18.12, -21.43, -20.37, -25.89, -17.91, -15.36, -22.16, -21.89, -18.46, -20.68, -17.41, -17.16, -21.88, -17.55, -20.57, -21.37, -16.03, -19.08, -21.37, -17.48, -19.01, -20.13, -17.73, -20.24, -19.03, -17.28, -20.83, -18.34, -17.26, -22.31, -18.62, -15.66, -21.80, -20.26, -18.92, -22.39, -16.59, -17.61, -20.92, -18.14, -21.94, -21.16, -15.36, -17.61, -24.09, -20.24, -21.90, -17.99, -16.28, -18.89, -22.11, -21.45, -25.27, -17.92, -15.44, -21.80, -22.94, -20.72, -22.50, -17.28, -17.92, -23.37, -23.37
2015-06-08, 12:00:31, 586003907, 587996093, 9765.62, 224, -22.66, -21.67, -22.68, -22.89, -17.11, -18.12, -24.02, -20.53, -20.24, -20.19, -16.54, -18.05, -21.68, -17.99, -21.96, -18.71, -16.45, -21.27, -20.30, -16.41, -20.16, -18.93, -17.68, -21.86, -17.66, -17.07, -20.82, -17.19, -18.78, -22.40, -16.60, -16.65, -22.29, -19.70, -20.15, -20.73, -16.43, -17.82, -22.20, -19.42, -23.80, -18.84, -14.95, -19.61, -23.25, -20.29, -22.67, -16.63, -16.26, -19.44, -21.63, -20.89, -23.08, -16.03, -15.84, -23.97, -21.76, -21.80, -19.63, -16.38, -17.39, -22.91, -20.58, -23.68, -19.15, -15.30, -19.70, -23.25, -19.04, -20.36, -18.18, -16.37, -20.21, -19.46, -19.51, -22.54, -16.88, -17.79, -22.92, -19.00, -17.04, -21.02, -18.15, -17.68, -20.67, -16.61, -19.22, -19.74, -17.95, -21.97, -21.37, -15.85, -17.98, -23.13, -19.17, -22.29, -17.26, -16.28, -18.50, -19.55, -20.99, -23.36, -16.62, -22.61, -22.61, -22.81, -20.83, -20.64, -16.44, -16.03, -20.01, -22.11, -25.25, -20.05, -14.13, -18.75, -24.13, -22.11, -21.36, -18.40, -16.65, -17.57, -23.07, -23.45, -23.03, -16.02, -16.10, -21.42, -22.86, -20.76, -20.68, -18.06, -16.47, -22.72, -21.61, -22.67, -19.98, -16.93, -19.56, -23.49, -18.31, -19.52, -21.61, -17.21, -20.54, -21.00, -20.22, -19.02, -18.72, -21.03, -23.39, -20.19, -16.35, -21.33, -20.63, -19.03, -22.92, -18.65, -17.08, -19.93, -21.56, -23.45, -23.59, -16.63, -18.28, -22.33, -20.31, -22.97, -20.96, -16.57, -16.96, -23.95, -24.89, -24.42, -17.21, -16.84, -21.09, -23.54, -22.67, -21.82, -18.15, -15.95, -21.12, -25.31, -24.02, -20.93, -16.68, -17.87, -22.69, -22.19, -22.46, -20.14, -17.08, -19.54, -25.86, -23.10, -20.14, -19.07, -18.97, -22.27, -22.89, -20.10, -22.29, -19.85, -20.55, -27.28, -27.28
2015-06-08, 12:00:31, 588003907, 589996093, 9765.62, 224, -26.13, -24.70, -21.31, -18.85, -19.47, -22.76, -26.11, -20.27, -18.07, -20.10, -19.20, -21.73, -22.97, -18.93, -17.97, -18.88, -20.40, -24.43, -20.82, -17.39, -19.07, -20.27, -21.30, -24.50, -19.66, -16.32, -17.92, -21.34, -24.09, -21.80, -15.87, -17.33, -20.42, -21.76, -22.80, -20.05, -16.95, -16.01, -22.51, -25.98, -23.71, -16.88, -15.75, -19.85, -22.55, -21.68, -20.21, -17.30, -16.30, -20.05, -25.67, -23.44, -18.72, -16.33, -18.35, -22.97, -19.78, -20.63, -19.44, -15.65, -18.97, -23.28, -22.36, -19.48, -16.62, -18.45, -21.37, -21.47, -16.94, -21.55, -18.66, -16.81, -23.62, -19.91, -17.72, -17.64, -18.95, -20.93, -23.99, -16.88, -17.87, -19.94, -17.80, -22.77, -21.51, -17.11, -15.71, -19.81, -21.18, -22.37, -16.87, -15.48, -19.49, -19.44, -20.31, -22.76, -17.80, -14.54, -18.41, -24.43, -22.87, -19.50, -15.04, -19.94, -19.94, -20.37, -22.00, -20.82, -15.19, -16.57, -24.33, -23.55, -19.90, -16.54, -16.59, -18.62, -21.64, -19.68, -22.56, -17.72, -15.54, -22.57, -24.36, -19.31, -18.31, -18.56, -18.47, -22.62, -18.73, -19.77, -20.17, -16.57, -19.98, -24.68, -19.68, -17.20, -19.84, -20.27, -20.96, -20.67, -17.88, -19.73, -18.85, -19.89, -25.86, -21.36, -16.64, -19.39, -22.86, -22.28, -22.53, -17.82, -18.89, -19.88, -20.76, -25.67, -23.65, -16.84, -17.36, -23.70, -23.50, -24.17, -18.66, -17.56, -19.42, -22.07, -25.34, -25.91, -18.92, -16.21, -21.15, -26.51, -22.67, -21.25, -17.61, -17.16, -20.80, -22.31, -24.68, -21.63, -16.95, -27.38, -29.55, -33.16, -33.87, -34.84, -33.18, -31.56, -33.20, -35.36, -34.64, -32.67, -35.13, -33.05, -32.89, -36.13, -34.26, -33.10, -33.40, -33.81, -35.31, -36.52, -33.06, -34.28, -34.69, -33.30, -33.30

\end{lstlisting}


ACM0 == AT command interface 0 ( used by the dialler )
ACM1 == AT command interface 1 , used to configure and manage the modem )
ACM2 == GPS NMEA output



We have a bunch of virtual devices on the SSM module that are exposed with an
MQTT interface. Each device has an 'inbox' topic in it's root path that accepts
workflow and configuration messages (XML).

Topics:

<IMEI>/status
Wether or not the endnode is currently connected to the broker




    
    
    
    
    
    
    
    
    
    
    